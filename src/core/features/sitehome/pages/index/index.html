<core-navbar-buttons slot="end" prepend>
    @if (searchEnabled) {
        <ion-button fill="clear" (click)="openSearch()" [ariaLabel]="'core.courses.searchcourses' | translate">
            <ion-icon name="fas-magnifying-glass" slot="icon-only" aria-hidden="true" />
        </ion-button>
    }
</core-navbar-buttons>
<ion-content>
    <ion-refresher slot="fixed" [disabled]="!dataLoaded" (ionRefresh)="doRefresh($event.target)">
        <ion-refresher-content pullingText="{{ 'core.pulltorefresh' | translate }}" />
    </ion-refresher>
    <core-loading [hideUntil]="dataLoaded" placeholderType="column" placeholderHeight="48px">
        <ion-list class="list-item-limited-width">
            <!-- Site home main contents. -->
            @if (section && section.hasContent) {
                <core-course-section [section]="section" [course]="{id: siteHomeId}" [collapsible]="false" class="card" />
            }

            <!-- Site home items: news, categories, courses, etc. -->
            @if (items.length > 0) {

                @for (item of items; track item) {
                    @switch (item) {
                        @case ('LIST_OF_COURSE') {
                            <ng-template *ngTemplateOutlet="allCourseList" />
                        }
                        @case ('LIST_OF_CATEGORIES') {
                            <ng-template *ngTemplateOutlet="categories" />
                        }
                        @case ('COURSE_SEARCH_BOX') {
                            <ng-template *ngTemplateOutlet="courseSearch" />
                        }
                        @case ('ENROLLED_COURSES') {
                            <ng-template *ngTemplateOutlet="enrolledCourseList" />
                        }
                        @case ('NEWS_ITEMS') {
                            <ng-template *ngTemplateOutlet="news" />
                        }
                    }
                }
            }
        </ion-list>
        @if (hasBlocks) {
            <core-block-side-blocks-button slot="fixed" contextLevel="course" [instanceId]="siteHomeId" />
        }

        @if (!hasContent) {
            <core-empty-box icon="fas-box-open" [message]="'core.course.nocontentavailable' | translate" />
        }
    </core-loading>
</ion-content>

<ng-template #allCourseList>
    <ion-card>
        <ion-item button class="ion-text-wrap" (click)="openAvailableCourses()">
            <ion-icon name="fas-graduation-cap" fixed-width slot="start" aria-hidden="true" />
            <ion-label>
                <p class="item-heading">{{ 'core.courses.availablecourses' | translate}}</p>
            </ion-label>
        </ion-item>
    </ion-card>
</ng-template>

<ng-template #news>
    @if (newsForumModule) {
        <core-course-module class="core-sitehome-news" [module]="newsForumModule" />
    }
</ng-template>

<ng-template #categories>
    <ion-card>
        <ion-item button class="ion-text-wrap" (click)="openCourseCategories()">
            <ion-icon name="far-folder" slot="start" aria-hidden="true" />
            <ion-label>
                <p class="item-heading">{{ 'core.courses.categories' | translate}}</p>
            </ion-label>
        </ion-item>
    </ion-card>
</ng-template>

<ng-template #enrolledCourseList>
    <ion-card>
        <ion-item button class="ion-text-wrap" (click)="openMyCourses()">
            <ion-icon name="fas-graduation-cap" fixed-width slot="start" aria-hidden="true" />
            <ion-label>
                <p class="item-heading">{{ 'core.courses.mycourses' | translate}}</p>
            </ion-label>
        </ion-item>
    </ion-card>
</ng-template>

<ng-template #courseSearch>
    <ion-card>
        <ion-item button class="ion-text-wrap" (click)="openSearch()">
            <ion-icon name="fas-magnifying-glass" slot="start" aria-hidden="true" />
            <ion-label>
                <p class="item-heading">{{ 'core.courses.searchcourses' | translate}}</p>
            </ion-label>
        </ion-item>
    </ion-card>
</ng-template>
